<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Obtener y Guardar Ubicación</title>
  <script>
    function obtenerUbicacion() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(enviarUbicacion, mostrarError);
      } else {
        alert("La geolocalización no es compatible con este navegador.");
      }
    }

    function enviarUbicacion(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const url = 'https://script.google.com/macros/s/AKfycbxs-NLy1PpyVUAkte8Zu10Yn62uNh_3lsPN_9Q-Pd2EzhkrgqJxE7A9WNQLOSdTGrk/exec'; // URL de la Web App
      const params = {
        method: 'POST',
        contentType: 'application/json',
        payload: JSON.stringify({ lat: lat, lon: lon })
      };
      fetch(url, params)
        .then(response => response.json())
        .then(data => {
          console.log('Ubicación guardada:', data);
        })
        .catch(error => {
          console.error('Error al guardar la ubicación:', error);
        });
    }

    function mostrarError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          alert("Permiso denegado para acceder a la ubicación.");
          break;
        case error.POSITION_UNAVAILABLE:
          alert("Información de ubicación no disponible.");
          break;
        case error.TIMEOUT:
          alert("Tiempo de espera agotado para obtener la ubicación.");
          break;
        case error.UNKNOWN_ERROR:
          alert("Error desconocido al obtener la ubicación.");
          break;
      }
    }
  </script>
</head>
<body>
  <h1>Obtener y Guardar Ubicación</h1>
  <button onclick="obtenerUbicacion()">Obtener y Guardar Ubicación</button>
</body>
</html>


